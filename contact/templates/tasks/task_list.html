{% extends "base_generic.html" %}

{% block content %}
    <h1>Task List</h1>

    {% if task_list %}
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Brief</th>
              <th>Deadline</th>
              <th>Complete?</th>
              <th>Project</th>
              <th>Associated Contacts</th>
            </tr>
          </thead>
          <tbody>
            {% for task in task_list %}
              <tr>
                <td>
                  <a href="{{ task.get_absolute_url }}">{{ task.brief }}</a>
                </td>
                <td>
                  <p>{{ task.deadline }}</p>
                </td>
                <td>
                  {% if task.complete %}
                    <p class="text-success">Yes</p>
                  {% elif task.overdue %}
                    <p class="text-warning">No</p>
                  {% else %}
                    <p>No</p>
                  {% endif %}
                </td>
                <td>
                  <a href="{{ task.proj.get_absolute_url }}">{{ task.proj.title }}</a>
                </td>
                <td>
                  <p>{{ task.associated.all.count }}</p>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div> 
    {% else %}
      <p>There are no tasks!</p>
    {% endif %}       
{% endblock %}