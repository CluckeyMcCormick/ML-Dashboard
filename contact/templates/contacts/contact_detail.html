{% extends "base_generic.html" %}

{% load bootstrap3 %}
{% load macros %}

{% loadmacros "contacts/contact_macro.html" %}
{% loadmacros "tasks/task_macro.html" %}


{% block content %}

  <h1><strong>Contact: </strong>{{ contact.name }}</h1>

  {% use_macro display_contact_large_tags contact %}

  {% use_macro display_contact_body contact %}

  <h2 class="col-sm-12" role="toolbar">
    {% bootstrap_button content='Edit' button_type='link' href=contact_edit_url button_class="btn-primary" icon="glyphicon glyphicon-pencil"%}
    {% bootstrap_button content='Delete' button_type='link' href=contact_delete_url button_class="btn-danger" icon="glyphicon glyphicon-remove"%}
  </h2>

<!--
  <div class="col-sm-1">
  </div>
  <div class="col-sm-1">
  </div>
-->
  <div class="col-sm-12 sublist-major">
    <!--                           -->
    <!-- Block 2 - Project Listing -->
    <!--                           -->
    <h3>Associated Projects</h3>

    {% if contact.associated_projects %}
      {% for proj in contact.associated_projects.all %}
        <hr>
        <a href="{{ proj.get_absolute_url }}">{{ proj.title }}</a>

      {% endfor %}
    {% else %}
      <p>No associated projects!</p>
    {% endif %}

    <!--                        -->
    <!-- Block 3 - Task Listing -->
    <!--                        -->
    <h3>Tasks</h3>
    {% if contact.taskcontactassoc_set.all %}
      {% for assoc in contact.taskcontactassoc_set.all %}
        <div class="col-sm-12">
          <hr>
          {% with assoc.task as task%}
            {% use_macro display_task_header task %}
            {% use_macro display_task_body task assoc=assoc show_contact=False %}
          {% endwith %} 
        </div>
      {% endfor %}
    {% else %}
      <p>No associated tasks!</p>
    {% endif %}
  </div>
{% endblock %}